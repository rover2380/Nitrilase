#!/usr/bin/perl##EXAMPLE INPUT ./THRESHOLD.PL TEST.DAT(TEST FILE) PREDICTIONS.PRED(PREDICTIONS FILE) #this file calculates the truepositives truenegatives etc and will be clubbed with file svmfinal.pl to produce the results.$file1 =$ARGV[0];$file2 =$ARGV[1];#thresh =$ARGV[2];$cnt=0;
for($in= -1.2;$in<=1.2;$in+= 0.1){    $cnt++;    $tp=$fp=$tn=$fn=0;    open(fp ,$file1) or die "Cannot open file $file1";    open (fp1, $file2) or die "Cannot open file $file";    if($cnt == 12)    {        $in = "-0.1";       }       while($t1=<fp>)    {        chomp($t1);        $t2 =<fp1>;        chomp($t2);        if($t1=~/\+/)        {            if($t2 >= $in)            {                        $i++;                $tp++;                    }            elsif($t2 < $in)            {                $i++;                $fn++;            }         }        elsif($t1=~/-/)        {
            if($t2 <= $in)            {                $j++;                $tn++;            }            elsif($t2>$in)            {                $j++;                $fp++;            }        }    }if (($tp>0) && ($tn>0)){    $sensitivity = ($tp/($tp+$fn))*100;    $specificity  = ($tn/($tn +$fp))*100;    $accuracy = ((($tp+$tn)/($tp+$tn +$fp +$fn)))*100;    $k= $tp+$fp;    $k1= $tp+$fn;    $k2= $tn+$fp;    $k3= $tn+$fn;    $a=$k*$k1*$k2*$k3;    $b= $a**0.5;    $j=$tp*$tn;    $j1= $fp*$fn;    $mc=$j-$j1;    $mcc = $mc/$b;    $rat=$fp/($tp+$fp)*100;}    printf "%5.1f",$in;     printf "%6.2f",$sensitivity;    printf "%6.2f",$specificity;    printf "%6.2f",$accuracy;    printf "%6.2f",$mcc;     printf "%6.2f",$rat;      print "\t$tp\t$tn\t$fp\t$fn\n";     close fp;    close fp1;
}
